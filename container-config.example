# LXC Container Configuration Example
# This file defines the complete configuration for creating an LXC container in Proxmox

container:
  # Target Proxmox node where the container will be created
  node: "pve"
  
  # Container template (OS image) - must be available on the specified node
  # Examples: "local:vztmpl/ubuntu-22.04-standard_22.04-1_amd64.tar.zst"
  #           "local:vztmpl/debian-12-standard_12.2-1_amd64.tar.zst"
  template: "local:vztmpl/ubuntu-22.04-standard_22.04-1_amd64.tar.zst"
  
  # Container hostname (optional)
  hostname: "my-container"
  
  # Root password - can reference environment variable
  # Use ${VARIABLE_NAME} to reference from .env file
  password: "${DEFAULT_ROOT_PASSWORD}"
  
  # SSH public keys for root access (optional)
  # Can be a single key or multiple keys separated by newlines
  # You can also reference SSH keys from your .env file using ${VARIABLE_NAME}
  ssh_keys: |
    ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC... user@hostname
    ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIG... user2@hostname
  
  # Alternative: Reference SSH keys from .env file
  # ssh_keys: "${ADMIN_SSH_KEY}"        # Single key from .env
  # ssh_keys: "${TEAM_SSH_KEYS}"        # Multiple keys from .env
  
  # Resource allocation
  resources:
    # Memory in MB (required)
    memory: 1024
    
    # Swap in MB (optional, default: 512)
    swap: 512
    
    # CPU cores (optional, default: 1)
    cores: 2
    
    # CPU limit as percentage (optional)
    # Example: 0.5 = 50% of one core, 2.0 = 200% (2 full cores)
    cpulimit: 1.0
    
    # CPU priority/weight (optional, default: 1024)
    # Higher values = higher priority
    cpuunits: 1024
  
  # Storage configuration
  storage:
    # Storage backend to use (optional, default: local-lvm)
    storage: "local-lvm"
    
    # Root filesystem size in GB (optional, default: 8)
    size: "20"
  
  # Network configuration
  network:
    - name: "eth0"
      bridge: "vmbr0"
      ip: "dhcp"  # or static IP like "192.168.1.100/24"
      # gateway: "192.168.1.1"  # required for static IP
      firewall: true
    # Additional network interfaces (optional)
    # - name: "eth1"
    #   bridge: "vmbr1"
    #   ip: "10.0.1.100/24"
    #   gateway: "10.0.1.1"
    #   firewall: false
  
  # Additional mount points/storage (optional)
  mountpoints:
    - storage: "local-lvm"
      size: "10"
      path: "/var/data"
      backup: true
    # - storage: "nfs-storage"
    #   size: "50"
    #   path: "/mnt/shared"
    #   backup: false
  
  # Container options
  options:
    # Run as unprivileged container (recommended for security)
    unprivileged: true
    
    # Start container automatically when Proxmox boots
    onboot: false
    
    # Start container immediately after creation
    start: false
    
    # Protect container from accidental deletion
    protection: false
  
  # DNS configuration (optional)
  dns:
    # DNS servers (space-separated)
    nameserver: "8.8.8.8 8.8.4.4"
    
    # Search domain
    searchdomain: "local.domain"
  
  # Container tags for organization (optional)
  tags: "web,production,ubuntu"
  
  # Container description (optional)
  description: |
    Web server container for production environment.
    Created automatically via script.
    
    Specifications:
    - Ubuntu 22.04 LTS
    - 2 CPU cores, 1GB RAM
    - 20GB root storage + 10GB data volume

# Alternative minimal configuration example:
# container:
#   node: "pve"
#   template: "local:vztmpl/ubuntu-22.04-standard_22.04-1_amd64.tar.zst"
#   hostname: "simple-container"
#   resources:
#     memory: 512
#   network:
#     - name: "eth0"
#       bridge: "vmbr0"
#       ip: "dhcp"